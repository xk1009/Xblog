"use strict";(self.webpackChunkx_blog=self.webpackChunkx_blog||[]).push([[2469],{1872:(t,e,i)=>{i.d(e,{B:()=>f});var a=i(4638),s=i(9516),n=i(7593),o=i(2344),h=i(7636);let d=null,r=[],c=[];function u(){return d??=new AudioContext}function l(){d&&0===r.length&&0===c.length&&d.close().then((()=>{d=null}))}class m{#t;#e;#i=null;#a=null;get currentGain(){return this.#i?.gain?.value??null}get supported(){return!0}constructor(t,e){this.#t=t,this.#e=e}setGain(t){const e=this.currentGain;t!==this.currentGain&&(1!==t||1===e?(this.#i||(this.#i=function(){const t=u(),e=t.createGain();return e.connect(t.destination),r.push(e),e}(),this.#a&&this.#a.connect(this.#i)),this.#a||(this.#a=function(t,e){const i=u().createMediaElementSource(t);return e&&i.connect(e),c.push(i),i}(this.#t,this.#i)),this.#i.gain.value=t,this.#e(t)):this.removeGain())}removeGain(){this.#i&&(this.#a&&this.#a.connect(u().destination),this.#s(),this.#e(null))}destroy(){this.#n(),this.#s()}#n(){if(this.#a)try{!function(t){const e=c.indexOf(t);-1!==e&&(c.splice(e,1),t.disconnect(),l())}(this.#a)}catch(t){}finally{this.#a=null}}#s(){if(this.#i)try{!function(t){const e=r.indexOf(t);-1!==e&&(r.splice(e,1),t.disconnect(),l())}(this.#i)}catch(t){}finally{this.#i=null}}}const p=["focus","blur","visibilitychange","pageshow","pagehide"];class g{#o=(0,s.O)(v());#h=(0,s.O)(document.visibilityState);#d;connect(){const t=new s.En(window),e=this.#r.bind(this);for(const i of p)t.add(i,e);a.Yw&&t.add("beforeunload",(t=>{this.#d=setTimeout((()=>{t.defaultPrevented||t.returnValue.length>0||(this.#o.set("hidden"),this.#h.set("hidden"))}),0)}))}get pageState(){return this.#o()}get visibility(){return this.#h()}#r(t){a.Yw&&window.clearTimeout(this.#d),"blur"===t.type&&"active"!==this.#o()||(this.#o.set(v(t)),this.#h.set("hidden"==document.visibilityState?"hidden":"visible"))}}function v(t){return"blur"===t?.type||"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}class y{#c;#u;#l=!1;#m=!1;#p=!1;#g=new n.e(this.#v.bind(this));#y=new g;#b;get#t(){return this.#c.media}constructor(t,e){this.#c=t,this.#u=e,this.#b=new s.En(t.media),this.#f(),this.#y.connect(),(0,s.QZ)(this.#k.bind(this)),(0,s.zp)(this.#T.bind(this))}#T(){this.#m=!1,this.#p=!1,this.#g.stop(),this.#b.abort(),this.#x?.clear()}#S=0;#w=-1;#v(){const t=this.#t.currentTime;a.Yw&&t-this.#w<.35||this.#S===t||(this.#E(t),this.#S=t)}#f(){this.#L("loadstart",this.#C),this.#L("abort",this.#N),this.#L("emptied",this.#P),this.#L("error",this.#A),this.#L("volumechange",this.#$)}#D(){this.#m||(this.#L("loadeddata",this.#R),this.#L("loadedmetadata",this.#F),this.#L("canplay",this.#G),this.#L("canplaythrough",this.#B),this.#L("durationchange",this.#M),this.#L("play",this.#q),this.#L("progress",this.#O),this.#L("stalled",this.#U),this.#L("suspend",this.#j),this.#L("ratechange",this.#V),this.#m=!0)}#I(){this.#p||(this.#L("pause",this.#Y),this.#L("playing",this.#z),this.#L("seeked",this.#Q),this.#L("seeking",this.#W),this.#L("ended",this.#H),this.#L("waiting",this.#K),this.#p=!0)}#x=void 0;#Z=void 0;#L(t,e){this.#b.add(t,e.bind(this))}#_(t){}#E(t,e){const i=Math.min(t,this.#u.$state.seekableEnd());this.#u.notify("time-change",i,e)}#C(t){3!==this.#t.networkState?(this.#D(),this.#u.notify("load-start",void 0,t)):this.#N(t)}#N(t){this.#u.notify("abort",void 0,t)}#P(){this.#u.notify("emptied",void 0,event)}#R(t){this.#u.notify("loaded-data",void 0,t)}#F(t){this.#S=0,this.#w=-1,this.#I(),this.#u.notify("loaded-metadata",void 0,t),(a.pz||a.Yw&&(0,a.YJ)(this.#u.$state.source()))&&this.#u.delegate.ready(this.#J(),t)}#J(){return{provider:(0,s.se)(this.#u.$provider),duration:this.#t.duration,buffered:this.#t.buffered,seekable:this.#t.seekable}}#q(t){this.#u.$state.canPlay&&this.#u.notify("play",void 0,t)}#Y(t){(1!==this.#t.readyState||this.#l)&&(this.#l=!1,this.#g.stop(),this.#u.notify("pause",void 0,t))}#G(t){this.#u.delegate.ready(this.#J(),t)}#B(t){this.#u.$state.started()||this.#u.notify("can-play-through",this.#J(),t)}#z(t){this.#t.paused||(this.#l=!1,this.#u.notify("playing",void 0,t),this.#g.start())}#U(t){this.#u.notify("stalled",void 0,t),this.#t.readyState<3&&(this.#l=!0,this.#u.notify("waiting",void 0,t))}#K(t){this.#t.readyState<3&&(this.#l=!0,this.#u.notify("waiting",void 0,t))}#H(t){this.#g.stop(),this.#E(this.#t.duration,t),this.#u.notify("end",void 0,t),this.#u.$state.loop()&&(0,s.gD)(this.#t.controls)&&(this.#t.controls=!1)}#k(){const t=this.#u.$state.paused(),e="hidden"===this.#y.visibility;(t||e)&&(0,s.k6)(this.#t,"timeupdate",this.#X.bind(this))}#X(t){this.#E(this.#t.currentTime,t)}#M(t){this.#u.$state.ended()&&this.#E(this.#t.duration,t),this.#u.notify("duration-change",this.#t.duration,t)}#$(t){const e={volume:this.#t.volume,muted:this.#t.muted};this.#u.notify("volume-change",e,t)}#Q(t){this.#w=this.#t.currentTime,this.#E(this.#t.currentTime,t),this.#u.notify("seeked",this.#t.currentTime,t),Math.trunc(this.#t.currentTime)===Math.trunc(this.#t.duration)&&(0,o.Q4)(this.#t.duration)>(0,o.Q4)(this.#t.currentTime)&&(this.#E(this.#t.duration,t),this.#t.ended||this.#u.player.dispatch(new s.vP("media-play-request",{trigger:t})))}#W(t){this.#u.notify("seeking",this.#t.currentTime,t)}#O(t){const e={buffered:this.#t.buffered,seekable:this.#t.seekable};this.#u.notify("progress",e,t)}#j(t){this.#u.notify("suspend",void 0,t)}#V(t){this.#u.notify("rate-change",this.#t.playbackRate,t)}#A(t){const e=this.#t.error;if(!e)return;const i={message:e.message,code:e.code,mediaError:e};this.#u.notify("error",i,t)}}class b{#c;#u;get#tt(){return this.#c.media.audioTracks}constructor(t,e){this.#c=t,this.#u=e,this.#tt.onaddtrack=this.#et.bind(this),this.#tt.onremovetrack=this.#it.bind(this),this.#tt.onchange=this.#at.bind(this),(0,s.k6)(this.#u.audioTracks,"change",this.#st.bind(this))}#et(t){const e=t.track;if(""===e.label)return;const i={id:e.id.toString()||`native-audio-${this.#u.audioTracks.length}`,label:e.label,language:e.language,kind:e.kind,selected:!1};this.#u.audioTracks[h.j.add](i,t),e.enabled&&(i.selected=!0)}#it(t){const e=this.#u.audioTracks.getById(t.track.id);e&&this.#u.audioTracks[h.j.remove](e,t)}#at(t){let e=this.#nt();if(!e)return;const i=this.#u.audioTracks.getById(e.id);i&&this.#u.audioTracks[h.j.select](i,!0,t)}#nt(){return Array.from(this.#tt).find((t=>t.enabled))}#st(t){const{current:e}=t.detail;if(!e)return;const i=this.#tt.getTrackById(e.id);if(i){const t=this.#nt();t&&(t.enabled=!1),i.enabled=!0}}}class f{constructor(t,e){this.media=t,this.ctx=e,this.audioGain=new m(t,(t=>{this.ctx.notify("audio-gain-change",t)}))}scope=(0,s.Ds)();currentSrc=null;audioGain;setup(){new y(this,this.ctx),"audioTracks"in this.media&&new b(this,this.ctx),(0,s.zp)((()=>{this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src");for(const t of this.media.querySelectorAll("source"))t.remove();this.media.load()}))}get type(){return""}setPlaybackRate(t){this.media.playbackRate=t}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(t){this.media.muted=t}setVolume(t){this.media.volume=t}setCurrentTime(t){this.media.currentTime=t}setPlaysInline(t){(0,s.Bq)(this.media,"playsinline",t)}async loadSource({src:t,type:e},i){this.media.preload=i||"",(0,a.dv)(t)?(this.removeSource(),this.media.srcObject=t):(this.media.srcObject=null,(0,s.Kg)(t)?"?"!==e?this.appendSource({src:t,type:e}):(this.removeSource(),this.media.src=this.#ot(t)):(this.removeSource(),this.media.src=window.URL.createObjectURL(t))),this.media.load(),this.currentSrc={src:t,type:e}}appendSource(t,e){const i=this.media.querySelector("source[data-vds]"),a=i??document.createElement("source");(0,s.Bq)(a,"src",this.#ot(t.src)),(0,s.Bq)(a,"type","?"!==t.type?t.type:e),(0,s.Bq)(a,"data-vds",""),i||this.media.append(a)}removeSource(){this.media.querySelector("source[data-vds]")?.remove()}#ot(t){const{clipStartTime:e,clipEndTime:i}=this.ctx.$state,a=e(),s=i();return a>0&&s>0?`${t}#t=${a},${s}`:a>0?`${t}#t=${a}`:s>0?`${t}#t=0,${s}`:t}}},6663:(t,e,i)=>{i.d(e,{z:()=>n});var a=i(9516);class s{#t;#u;#o;#ht=(0,a.O)(!1);get supported(){return this.#ht()}constructor(t,e){this.#t=t,this.#u=e,this.#dt()}#dt(){this.#t?.remote&&this.canPrompt&&(this.#t.remote.watchAvailability((t=>{this.#ht.set(t)})).catch((()=>{this.#ht.set(!1)})),(0,a.QZ)(this.#rt.bind(this)))}#rt(){if(!this.#ht())return;const t=["connecting","connect","disconnect"],e=this.#ct.bind(this);e(),(0,a.k6)(this.#t,"playing",e);const i=new a.En(this.#t.remote);for(const a of t)i.add(a,e)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.type&&this.#t.webkitShowPlaybackTargetPicker?this.#t.webkitShowPlaybackTargetPicker():this.#t.remote.prompt()}#ct(t){const e=this.#t.remote.state;if(e===this.#o)return;const i={type:this.type,state:e};this.#u.notify("remote-playback-change",i,t),this.#o=e}}class n extends s{type="airplay";get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}}},7593:(t,e,i)=>{i.d(e,{e:()=>s});var a=i(9516);class s{#ut;#lt;constructor(t){this.#lt=t}start(){(0,a.b0)(this.#ut)&&this.#mt()}stop(){(0,a.Et)(this.#ut)&&window.cancelAnimationFrame(this.#ut),this.#ut=void 0}#mt(){this.#ut=window.requestAnimationFrame((()=>{(0,a.b0)(this.#ut)||(this.#lt(),this.#mt())}))}}}}]);