"use strict";(self.webpackChunkx_blog=self.webpackChunkx_blog||[]).push([[2887],{5:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>e,data:()=>p});var n=a(641);const l={},e=(0,a(6262).A)(l,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,[i[0]||(i[0]=(0,n.Fv)('<h2 id="shell脚本编程" tabindex="-1"><a class="header-anchor" href="#shell脚本编程"><span>Shell脚本编程</span></a></h2><h2 id="what" tabindex="-1"><a class="header-anchor" href="#what"><span>what？</span></a></h2><pre><code>1.命令的堆积；\n2.特定的语法+系统的命令=文件；\n3.解释型语言 逐行解释为计算机识别的二进制机器语言\n4.每次执行都要进行解释相对于编译型语言速度较慢\n</code></pre><h2 id="use" tabindex="-1"><a class="header-anchor" href="#use"><span>use？</span></a></h2><pre><code>简化步骤，提高效率，减少人为干预，减少系统故障\n1.自动化软件部署\n2.自动化管理\n3.自动化分析处理\n4.自动化备份\n5.自动化监控\n...\n</code></pre><hr><h2 id="shell基本语法-文件命名方式-xxx-sh" tabindex="-1"><a class="header-anchor" href="#shell基本语法-文件命名方式-xxx-sh"><span>shell基本语法 文件命名方式 <a href="http://XXX.sh" target="_blank" rel="noopener noreferrer">XXX.sh</a></span></a></h2><pre><code>#!/bin/bash   \n#第一行 使用的解释器\n#!/bin/env bash 使用当前环境的 bash\n\n#内容注释\n\n#脚本内容\n</code></pre><hr><h2 id="写好一个shell文件后如何执行" tabindex="-1"><a class="header-anchor" href="#写好一个shell文件后如何执行"><span>写好一个shell文件后如何执行？</span></a></h2><pre><code>标准执行方式\n    1.添加执行权限 chmod +x xxx.sh\n    2.文件相对路径 或者 绝对路径执行\n非标准执行方式(在java程序中使用的是这种方式 runtime)\n    bash -x xxx.sh 可查看执行过程\n    sh /shell/xxx.sh\n检查脚本 bash -n xxx.sh \n</code></pre><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Runtime</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> runtime </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Runtime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRuntime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //通过ssl签署mobileconfig文件</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] shell </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[]{</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;/bin/sh&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;/opt/ruby/sign.sh&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    signAddress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    signAddressa</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    runtime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">exec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(shell).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">waitFor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="shell变量怎么定义" tabindex="-1"><a class="header-anchor" href="#shell变量怎么定义"><span>shell变量怎么定义？</span></a></h2><ul><li>某个内容多次使用，并在代码中反复出现</li><li>在代码运行过程中，可以把某些命令的执行结果保存起来，后段代码继续使用</li></ul><p>变量名 = 变量值</p><pre><code>1.变量名不要使用特殊符号，\n2.不能使用数字开头，\n3.值不能有空格，如果有使用引号\n4.变量名一般使用大写（小写也行）\n</code></pre><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>    #变量赋值</span></span>\n<span class="line"><span>    A=hello</span></span>\n<span class="line"><span>    #使用变量 打印</span></span>\n<span class="line"><span>    echo $A</span></span>\n<span class="line"><span>    echo ${A}</span></span>\n<span class="line"><span>    #{}方式可以使用变量其中的字符，切片</span></span>\n<span class="line"><span>    B=123456</span></span>\n<span class="line"><span>    echo ${B:2:3}  &gt;&gt; 345 #从第2的索引开始切3个字符</span></span>\n<span class="line"><span>    #取消变量</span></span>\n<span class="line"><span>    unset B</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="交互式定义变量-变量值由用户自己输入-也可以读取文件内容赋值" tabindex="-1"><a class="header-anchor" href="#交互式定义变量-变量值由用户自己输入-也可以读取文件内容赋值"><span>交互式定义变量 变量值由用户自己输入 也可以读取文件内容赋值</span></a></h2><pre><code>read [可选项] 变量名称\n-p 提示用户信息\n-s 用户输入不显示\n-n 指定字符长度\n-t 秒/限制时间\n</code></pre><hr><h2 id="定义有类型的变量-declare" tabindex="-1"><a class="header-anchor" href="#定义有类型的变量-declare"><span>定义有类型的变量 declare</span></a></h2><pre><code>declare [可选项] 变量名=变量值\n-i 把变量值作为一个整数\n-r 只读变量\n-x 环境变量\n</code></pre><hr><h2 id="变量的分类-针对于作用域" tabindex="-1"><a class="header-anchor" href="#变量的分类-针对于作用域"><span>变量的分类 针对于作用域</span></a></h2><pre><code>1.本地变量\n当前用户自定义的变量。当前进程中有效，其他进程或当前进程的子进程无效\n\n2.环境变量\n当前进程有效，并且能够被子进程调用\nenv 查看当前用户的环境变量\nset 查看本地变量和环境变量\n定义环境变量 定义本地变量使用export导出 或使用 declare -x\n\n3.全局变量\n全局所有用户和程序都可以调用，且继承，新建用户也可以使用\n\n4.系统变量（内置bash中变量）\nshell已经固定好了它的名字和作用\n$? 上一条命令执行后返回的状态，0表示为正常，非0表示异常或错误\n$# 脚本后面跟的参数的 个数\n$* 脚本后面跟的参数，整体输出，以空格分开\n$@ 脚本后面跟的参数，参数是独立的，全部输出\n$1-$9 脚本后面的参数位置，$1表示第一个参数，10以后使用${10}\n$$ 当前进程号\n</code></pre><hr><h2 id="简单的四则运算-加减乘除" tabindex="-1"><a class="header-anchor" href="#简单的四则运算-加减乘除"><span>简单的四则运算（加减乘除）</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">默认情况下，shell就只能支持简单的整数计算</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$((</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1+2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))    &gt;&gt;3</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$[1+2]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      &gt;&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">expr</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &gt;&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">3</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">let</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 需要定义变量进行计算</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">let</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i++</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="条件判断语法结构" tabindex="-1"><a class="header-anchor" href="#条件判断语法结构"><span>条件判断语法结构</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">test</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表达式</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[ 表达式 ]      其中变量一定要加引号</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[[ 表达式 ]]    其中变量不用加引号</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.字符串判断</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-z</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是否为空，0则成立</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 非空，0则成立</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">string1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> string2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 字符串相等</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">string1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> !=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> string2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 字符串不相等</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.整数判断</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-eq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 相等</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-ne</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 不等</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-gt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 大于</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-ge</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 大于等于</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-le</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 小于等于</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-lt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 小于</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.多重判断</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">逻辑与</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 和</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> || </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">逻辑或</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="流程控制器" tabindex="-1"><a class="header-anchor" href="#流程控制器"><span>流程控制器</span></a></h2><p>if</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span></span></span>\n<span class="line"><span>if [条件];</span></span>\n<span class="line"><span>then</span></span>\n<span class="line"><span>    命令</span></span>\n<span class="line"><span>else</span></span>\n<span class="line"><span>    命令</span></span>\n<span class="line"><span>fi</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>-----------------------</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>if [条件];</span></span>\n<span class="line"><span>then</span></span>\n<span class="line"><span>    命令</span></span>\n<span class="line"><span>elif</span></span>\n<span class="line"><span>    命令</span></span>\n<span class="line"><span>else</span></span>\n<span class="line"><span>    命令</span></span>\n<span class="line"><span>fi</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>=====================</span></span>\n<span class="line"><span>例1：</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#!/bin/env bash</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#name:ping.sh</span></span>\n<span class="line"><span>#des:ping localhostIp and serverIp is ok?</span></span>\n<span class="line"><span>#IP:serverIP from user input</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>read -p &quot;please input you want test ip :&quot; IP</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ping -c1 $IP &amp;&gt;/dev/null</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>if [ $? -eq 0 ];</span></span>\n<span class="line"><span>then</span></span>\n<span class="line"><span>\techo &quot;connection $IP is ok!&quot;</span></span>\n<span class="line"><span>else</span></span>\n<span class="line"><span>\techo &quot;connection $IP is fail!&quot;</span></span>\n<span class="line"><span>fi</span></span>\n<span class="line"><span>==========================</span></span>\n<span class="line"><span>例2：</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#!/bin/env bash</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#name:pid.sh</span></span>\n<span class="line"><span>#des:判断进程是否存在</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>read -p &quot;请输入需要查看的进程名称：&quot; P_NAME</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>ps -ef|grep $P_NAME|grep -v &#39;grep&#39; &amp;&gt;/dev/null</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>if [ $? -eq 0 ];</span></span>\n<span class="line"><span>then</span></span>\n<span class="line"><span>\techo &quot;$P_NAME 此进程存在&quot;</span></span>\n<span class="line"><span>else</span></span>\n<span class="line"><span>\techo &quot;$P_NAME 此进程不存在&quot;</span></span>\n<span class="line"><span>fi</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#[ $? -eq 0 ] &amp;&amp; echo &quot;$P_NAME 此进程存在&quot; || &quot;$P_NAME 此进程不存在&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="for-循环" tabindex="-1"><a class="header-anchor" href="#for-循环"><span>for 循环</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>for 变量 in {}</span></span>\n<span class="line"><span>    do</span></span>\n<span class="line"><span>        命令</span></span>\n<span class="line"><span>        命令</span></span>\n<span class="line"><span>        。。。</span></span>\n<span class="line"><span>    done</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>或者</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>for 变量 in a b c</span></span>\n<span class="line"><span>    do</span></span>\n<span class="line"><span>        命令</span></span>\n<span class="line"><span>    done</span></span>\n<span class="line"><span>    </span></span>\n<span class="line"><span>带条件for循环</span></span>\n<span class="line"><span>注意这里是两个括号</span></span>\n<span class="line"><span>for (( i=1; 1&lt;=5; i++ ))</span></span>\n<span class="line"><span>    do</span></span>\n<span class="line"><span>        echo $i</span></span>\n<span class="line"><span>    done</span></span>\n<span class="line"><span>=============================================</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>例：</span></span>\n<span class="line"><span>#!/bin/env bash</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#des:odd number sum</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>#判断携带的参数不为空 且大于0</span></span>\n<span class="line"><span>#还需判断数字不为小数 可使用正则判断 正则需要使用[[条件]]进行判断</span></span>\n<span class="line"><span>if [ -n &quot;$1&quot; ] &amp;&amp; [ -n &quot;$2&quot; ] &amp;&amp; [ &quot;$1&quot; -gt 0 ] &amp;&amp; [ &quot;$2&quot; -gt 0 ]</span></span>\n<span class="line"><span>then</span></span>\n<span class="line"><span>\techo &quot;开始计算 $1 到 $2 奇数和&quot;</span></span>\n<span class="line"><span>\tdeclare -i SUM=0</span></span>\n<span class="line"><span>\t#需要判断开始数字是奇数还是偶数,开始数为偶数则加1</span></span>\n<span class="line"><span>\tdeclare -i START_NUM=0</span></span>\n<span class="line"><span>\tif [ $[$1%2] -eq 0 ]</span></span>\n<span class="line"><span>\tthen</span></span>\n<span class="line"><span>\t\tSTART_NUM=$1+1</span></span>\n<span class="line"><span>\telse</span></span>\n<span class="line"><span>\t\tSTART_NUM=$1</span></span>\n<span class="line"><span>\tfi</span></span>\n<span class="line"><span>\tfor (( i=START_NUM; i&lt;=$2; i+=2 ))</span></span>\n<span class="line"><span>\tdo</span></span>\n<span class="line"><span>\t\tSUM+=i;</span></span>\n<span class="line"><span>\tdone</span></span>\n<span class="line"><span>\techo &quot;$1 到 $2 之间的奇数和为：$SUM&quot;</span></span>\n<span class="line"><span>else</span></span>\n<span class="line"><span>\techo &quot;请携带需要计算的两个正整数，第一个为开始数字，第二个为结束数字&quot;</span></span>\n<span class="line"><span>fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>* continue  跳过本次循环\n* break     直接跳出循环\n* exit      直接退出程序\n</code></pre><hr><h2 id="while-循环" tabindex="-1"><a class="header-anchor" href="#while-循环"><span>while 循环</span></a></h2><pre><code>特点是条件为真就进入循环，为假不进循环\n注意避免死循环\n</code></pre>',44)),(0,n.Q3)(""),i[1]||(i[1]=(0,n.Lk)("pre",null,[(0,n.Lk)("code",null,"while 表达式\ndo\n    命令\ndone\n")],-1)),i[2]||(i[2]=(0,n.Lk)("hr",null,null,-1)),i[3]||(i[3]=(0,n.Lk)("h2",{id:"until-循环",tabindex:"-1"},[(0,n.Lk)("a",{class:"header-anchor",href:"#until-循环"},[(0,n.Lk)("span",null,"until 循环")])],-1)),i[4]||(i[4]=(0,n.Lk)("pre",null,[(0,n.Lk)("code",null,"特点与while相反，条件为假进入循环，为真不进循环\n")],-1)),(0,n.Q3)(""),i[5]||(i[5]=(0,n.Fv)('<pre><code>until 表达式\ndo\n    命令\ndone\n</code></pre><hr><h2 id="系统变量-随机数-random" tabindex="-1"><a class="header-anchor" href="#系统变量-随机数-random"><span>系统变量 随机数 RANDOM</span></a></h2><pre><code>echo $RANDOM\n范围 0 ~ 32767\n\n获取0~1的随机数\n$[$RANDOM%1]\n获取0~10的随机数\n$[$RANDOM%11]\n</code></pre><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h2><pre><code>函数名(){}\n在本文件中调用 直接函数名\n在终端调用 source 文件 直接输入函数名\nreturn可以结束一个函数\nreturn 数字 返回一个自定义返回值 可用于$? 判断\n</code></pre><h2 id="openssl" tabindex="-1"><a class="header-anchor" href="#openssl"><span>openssl</span></a></h2><pre><code>openssl smime -sign -in $1 -out $2 -signer /opt/ruby/2.crt -inkey /opt/ruby/1.key -certfile /opt/ruby/3.pem -outform der -nodetach\n</code></pre><p>openssl smime</p><table><thead><tr><th style="text-align:center;">参数</th><th style="text-align:center;">english description</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">-sign</td><td style="text-align:center;">sign message</td><td style="text-align:center;">签名消息</td></tr><tr><td style="text-align:center;">-in</td><td style="text-align:center;">input file</td><td style="text-align:center;">输入文件</td></tr><tr><td style="text-align:center;">-signer</td><td style="text-align:center;">signer certificate file</td><td style="text-align:center;">签署者证书文件</td></tr><tr><td style="text-align:center;">-inkey</td><td style="text-align:center;">input private key (if not signer or recipient)</td><td style="text-align:center;">输入私钥（如果不是签名者或收件人）</td></tr><tr><td style="text-align:center;">-certfile</td><td style="text-align:center;">other certificates file</td><td style="text-align:center;">其他证书文件</td></tr><tr><td style="text-align:center;">-outform</td><td style="text-align:center;">output format SMIME (default), PEM or DER</td><td style="text-align:center;">输出格式SMIME（默认），PEM或DER</td></tr><tr><td style="text-align:center;">-nodetach</td><td style="text-align:center;">use opaque signing</td><td style="text-align:center;">使用不透明的签名</td></tr></tbody></table><h2 id="linux-常用命令" tabindex="-1"><a class="header-anchor" href="#linux-常用命令"><span>linux 常用命令</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查看端口</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lnp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8000 </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --query-port=666/tcp</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看指定端口是否开放</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --zone=public</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-port=3306/top</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -permanent</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   #开放指定端口</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">firewall-cmd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -reload</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #开启后刷新一下防火墙</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看防火墙状态</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #关闭防火墙</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> firewalld</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #开启防火墙</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查看linux版本信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">部署项目</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 指定日志输出位置</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Dserver.port=8080</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sentinel-dashboard.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sentinel.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">shift</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+zz</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #编辑快速保存退出</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ntlp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [$Port]</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查看进程</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查看进程号</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pgrep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#mysql 数据导出</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mysqldump</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 用户名</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 数据库名</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">导出的文件名</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mysqldump</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 用户名</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 数据库名</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 表</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">名&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">导出的文件名</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查看ssl证书可用时间</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {证书文件}</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -noout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dates</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">例如：openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> x509</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/app/test/2779074_d1.6bapp.cn.pem</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -noout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -dates</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#清空日志</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; filename</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">listener_scan1.log </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#查找关键字 上下</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> keyword</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> catalina.out</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">df</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看云盘使用情况</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看当前目录使用情况</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 777</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 文件名</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #添加上传权限</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="grep-过滤命令" tabindex="-1"><a class="header-anchor" href="#grep-过滤命令"><span>grep 过滤命令</span></a></h2><ul><li>i 忽略大小写</li><li>n 显示行号</li><li>v 取反</li><li>A 后面几行</li><li>B 前面几行</li><li>C 前后几行</li></ul><h2 id="vim-快捷键" tabindex="-1"><a class="header-anchor" href="#vim-快捷键"><span>vim 快捷键</span></a></h2><ul><li>u 撤销上一步</li><li>j 上一行</li><li>k 下一行</li><li>G 大写的G 光标移动到最后一行</li><li>gg 第一行</li><li>/xx 搜索字符</li><li>x，X 删除后一个字符 和 前一个字符</li><li>dd 删除光标所在行</li><li>yy 复制光标所在行</li><li>ctrl+r 重复上一个操作</li><li>ZZ 保存退出</li></ul><h2 id="定时任务" tabindex="-1"><a class="header-anchor" href="#定时任务"><span>定时任务</span></a></h2><ul><li>crontab -u //设定某个用户的cron服务，一般root用户在执行这个命令的时候需要此参数</li><li>crontab -l //列出某个用户cron服务的详细内容</li><li>crontab -r //删除没个用户的cron服务</li><li>crontab -e //编辑某个用户的cron服务</li></ul><h2 id="启动脚本" tabindex="-1"><a class="header-anchor" href="#启动脚本"><span>启动脚本</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/usr/bin/nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/app/jar/video_manager-0.0.1.jar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --spring.profiles.active=test-mengmai-loc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -Xms64m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Xmx512m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MaxMetaspaceSize=512m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:CompressedClassSpaceSize=64m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Xss256k</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Xmn8m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:InitialCodeCacheSize=4m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:ReservedCodeCacheSize=8m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -XX:MaxDirectMemorySize=16m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    2&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/opt/app/jar/capital.out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="重启脚本" tabindex="-1"><a class="header-anchor" href="#重启脚本"><span>重启脚本</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   PID</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> video_manager-0.0.1.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{ print $2 }&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">   echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PID</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   GetPageInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   StartTomcat</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/opt/app/jar/start.sh</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   WebUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">http://127.0.0.1:8889/test.jpg</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">   TomcatMonitorLog</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/opt/app/jar/nohup.out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Monitor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()  </span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{ </span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-z</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#不存在</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $StartTomcat</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#存在</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\techo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 获取返回状态码  </span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;[error]</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TomcatServiceCode</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $GetPageInfo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;[error]java error&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $PID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    $StartTomcat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Monitor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$TomcatMonitorLog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cpu过高排查方法" tabindex="-1"><a class="header-anchor" href="#cpu过高排查方法"><span>cpu过高排查方法</span></a></h2><ol><li>top命令看那个进程较高</li><li>top -h -p 进程id 找到线程id</li><li>将线程id 转为16进制 printf &#39;0x%x\\n&#39; 线程id</li><li>使用jstack jstack 进程id|grep 16进制线程id -A 20 找到出问题的代码</li></ol><h2 id="数据库备份" tabindex="-1"><a class="header-anchor" href="#数据库备份"><span>数据库备份</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#数据库备份</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">进入到备份目录中</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bkDatabaseName.sh</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">输入/粘贴以下内容：</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">不压缩版本---</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mysqldump</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -uusername</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ppassword</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DatabaseName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/home/backup/DatabaseName_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +%Y%m%d_%H%M%S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.sql</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">压缩版本---</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mysqldump</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -uusername</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ppassword</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DatabaseName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gzip</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/home/backup/DatabaseName_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +%Y%m%d_%H%M%S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.sql.gz</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">用root账户</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">把</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换为实际的用户名；</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">把</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换为实际的密码；</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">把</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DatabaseName</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换为实际的数据库名；</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jebkins-启动脚本" tabindex="-1"><a class="header-anchor" href="#jebkins-启动脚本"><span>jebkins 启动脚本</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/jenkins_home/workspace/super-user/target/super-user.jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/jenkins_home/jar/</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">APP_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">super-user.jar</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">LOG_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">super-user.log</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $APP_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $2}&#39;`</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> is_exist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(){</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $APP_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $2}&#39;`</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-z</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> ${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;notExist&quot;</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $String</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;exist&quot;</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $String</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_exist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;exist&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; 检测到已经启动的程序，pid 是 </span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $pid</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; 程序没有启动了 &quot;</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">APP_NAME</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is not running&quot;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_exist</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">str</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;exist&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">APP_NAME</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 已经启动了. pid=</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pid</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .&quot;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/profile</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">BUILD_ID</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dontKillMe</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Xms300m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Xmx300m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/jenkins_home/jar/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$APP_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   &gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$LOG_NAME</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;程序已重新启动...&quot;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',28))])}]]),p=JSON.parse('{"path":"/om/O_M/Linux.html","title":"Linux","lang":"zh-CN","frontmatter":{"icon":"l","date":"2024-08-25T00:00:00.000Z","category":["O&M"],"tag":["运维","linux","笔记","记录"],"title":"Linux","pageview":true,"description":"Shell脚本编程 what？ use？ shell基本语法 文件命名方式 XXX.sh 写好一个shell文件后如何执行？ shell变量怎么定义？ 某个内容多次使用，并在代码中反复出现 在代码运行过程中，可以把某些命令的执行结果保存起来，后段代码继续使用 变量名 = 变量值 交互式定义变量 变量值由用户自己输入 也可以读取文件内容赋值 定义有类型的...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-08-25T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-14T07:00:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"XK\\",\\"url\\":\\"https://xk1009.github.io/Xblog\\",\\"email\\":\\"564293991@qq.com\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Xblog/om/O_M/Linux.html"}],["meta",{"property":"og:site_name","content":"树下打盹儿"}],["meta",{"property":"og:title","content":"Linux"}],["meta",{"property":"og:description","content":"Shell脚本编程 what？ use？ shell基本语法 文件命名方式 XXX.sh 写好一个shell文件后如何执行？ shell变量怎么定义？ 某个内容多次使用，并在代码中反复出现 在代码运行过程中，可以把某些命令的执行结果保存起来，后段代码继续使用 变量名 = 变量值 交互式定义变量 变量值由用户自己输入 也可以读取文件内容赋值 定义有类型的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-14T07:00:52.000Z"}],["meta",{"property":"article:tag","content":"记录"}],["meta",{"property":"article:tag","content":"笔记"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:published_time","content":"2024-08-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-14T07:00:52.000Z"}]]},"git":{"createdTime":1750255462000,"updatedTime":1752476452000,"contributors":[{"name":"xk","username":"xk","email":"564293991@qq.com","commits":3,"url":"https://github.com/xk"}]},"readingTime":{"minutes":8.56,"words":2567},"filePathRelative":"om/O&M/Linux.md","excerpt":"<h2>Shell脚本编程</h2>\\n<h2>what？</h2>\\n<pre><code>1.命令的堆积；\\n2.特定的语法+系统的命令=文件；\\n3.解释型语言 逐行解释为计算机识别的二进制机器语言\\n4.每次执行都要进行解释相对于编译型语言速度较慢\\n</code></pre>\\n<h2>use？</h2>\\n<pre><code>简化步骤，提高效率，减少人为干预，减少系统故障\\n1.自动化软件部署\\n2.自动化管理\\n3.自动化分析处理\\n4.自动化备份\\n5.自动化监控\\n...\\n</code></pre>\\n<hr>\\n<h2><a class=\\"header-anchor\\" href=\\"#shell基本语法-文件命名方式-xxx-sh\\"><span>shell基本语法 文件命名方式 </span></a><a href=\\"http://XXX.sh\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">XXX.sh</a></h2>","autoDesc":true}')},6262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}}}]);